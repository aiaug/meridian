{"id": "mem-0001", "timestamp": "2025-12-03T01:36:46Z", "summary": "Race condition fix: Changed pending reads tracking from single JSON file to directory-based marker files (.meridian/.pending-context-reads/). Each file gets its own numbered .pending marker. File deletion is atomic at the filesystem level, so parallel reads don't interfere. Key functions: create_pending_reads(), get_pending_reads(), remove_pending_read(), cleanup_pending_reads() in config.py.", "tags": ["architecture", "problem-solved", "pattern"], "links": [".claude/hooks/lib/config.py", ".claude/hooks/post-compact-guard.py"]}
{"id": "mem-0002", "timestamp": "2025-12-03T03:11:07Z", "summary": "Always use CLAUDE_PROJECT_DIR env var for absolute paths in hooks and scripts. Relative paths like '.meridian/file.md' fail when the agent cd's into subdirectories. Use: project_dir = os.environ.get('CLAUDE_PROJECT_DIR', cwd) then Path(project_dir) / relative_path. Applied to: plan-review.py, pre-stop-update.py, and all memory-curator scripts.", "tags": ["pattern", "problem-solved"], "links": [".claude/hooks/plan-review.py", ".claude/hooks/pre-stop-update.py", ".claude/skills/memory-curator/scripts/"]}
